"use strict";(self.webpackChunkagro_web=self.webpackChunkagro_web||[]).push([[1127],{1127:function(e,r,n){n.r(r);var s=n(4165),a=n(5861),t=n(1413),i=n(885),l=n(2791),o=n(9434),d=n(6871),u=n(5705),m=n(132),c=n(4034),h=n(9971),x=n(3767),p=n(890),f=n(533),v=n(254),w=(n(5013),n(5865)),b=n(5524),j=n(5750),g=n(4298),_=n(705),Z=n(1303),y=n(184);r.default=function(){var e,r=(0,o.I0)(),n=(0,d.s0)(),N=(0,l.useState)(!1),q=(0,i.Z)(N,2),F=q[0],S=q[1],k=(0,l.useState)([]),C=(0,i.Z)(k,2),B=(C[0],C[1]),A=(0,o.v9)((function(e){return e.AuthReducer.userProfile||JSON.parse(sessionStorage.getItem("user_profile"))})),E=((0,o.v9)((function(e){return e.TenantReducer.tenants})),(0,t.Z)((0,t.Z)({},Z.cE),{},{width:(0,t.Z)((0,t.Z)({},Z.cE.width),{},{md:"auto"})}));(0,l.useEffect)((function(){var e;(0,g.F3)({filterByAuthority:!0,authUser:A},B),(0,h.B)({role:null===A||void 0===A||null===(e=A.my_role)||void 0===e?void 0:e.role,action:"user:create:add-tenant-info"})&&r((0,_.ax)({page:1}))}),[A,null===A||void 0===A||null===(e=A.my_role)||void 0===e?void 0:e.role,r]);var I=m.Ry({first_name:c.t.name("First name").required("First name is required"),last_name:c.t.name("Last name").required("Last name is required"),email:c.t.email().required("Email is required"),password:c.t.password("Password").required("Password is required"),group:c.t.blank().required("User group is required"),bvn:c.t.bvn("BVN")});return(0,y.jsx)(l.Fragment,{children:(0,y.jsxs)("section",{children:[(0,y.jsx)("nav",{id:"quick-nav",children:(0,y.jsx)(w.Z,{breadcrumbs:[(0,y.jsx)(p.Z,{color:"inherit",children:"User Management"},"1"),(0,y.jsx)(f.Z,{href:"/user-management/users",color:"inherit",children:"Manage Users"},"2"),(0,y.jsx)(p.Z,{color:"primary.main",children:"Add User"},"3")]})}),(0,y.jsxs)(x.Z,{direction:"column",px:4,py:3,alignItems:"flex-start",sx:{backgroundColor:"#FFF",boxShadow:"0px 5px 20px rgba(108, 117, 125, 0.15)",borderRadius:"5px"},children:[(0,y.jsx)("h3",{className:"first-text ml-1.5",children:"Add New Tenant"}),(0,y.jsx)(u.J9,{initialValues:{first_name:"",last_name:"",email:"",password:"",group:"",bvn:"",phone:"",tenant:""},validationSchema:I,onSubmit:function(){var e=(0,a.Z)((0,s.Z)().mark((function e(a,t){var i,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.resetForm,l={first_name:a.first_name,last_name:a.last_name,email:a.email,password:a.password,group:a.group,tenant:a.tenant||"TN-40",bvn:a.bvn},S(!0),r((0,j.cn)(l)).then((function(e){console.log(e),S(!1),(null!==e&&void 0!==e&&e.data||null!==e&&void 0!==e&&e.success)&&(i(),window.setTimeout((function(){return n("/user-management/users")}),1e3))}));case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),children:function(e){var r=e.values,n=e.errors,s=e.touched,a=e.handleChange,t=e.handleBlur,i=e.handleSubmit;return(0,y.jsxs)("form",{onSubmit:i,style:{width:"100%",border:"1px solid transparent"},children:[(0,y.jsx)(x.Z,{direction:"row",justifyContent:"space-between",sx:{flexWrap:{xs:"wrap",lg:"nowrap"}},children:(0,y.jsxs)(x.Z,{direction:"column",sx:{mx:1,width:"100%"},children:[(0,y.jsxs)("label",{htmlFor:"first_name",className:"second-text my-3",children:["First Name ",(0,y.jsx)("small",{className:"text-red-500",children:"*"})]}),(0,y.jsx)(v.Z,{id:"first_name",sx:E,name:"first_name",InputProps:{style:{height:"44px"}},onChange:a,onBlur:t,value:r.first_name,className:n.first_name&&s.first_name?"input-error":null}),n.first_name&&s.first_name&&(0,y.jsx)("span",{className:"error",children:n.first_name})]})}),(0,y.jsx)(x.Z,{direction:"row",justifyContent:"space-between",sx:{flexWrap:{xs:"wrap",lg:"nowrap"}},children:(0,y.jsxs)(x.Z,{direction:"column",sx:{mx:1,width:"100%"},children:[(0,y.jsxs)("label",{htmlFor:"email",className:"second-text my-3",children:["Email ",(0,y.jsx)("small",{className:"text-red-500",children:"*"})]}),(0,y.jsx)(v.Z,{sx:E,id:"email",name:"email",InputProps:{style:{height:"44px"}},onChange:a,onBlur:t,value:r.email,className:n.email&&s.email?"input-error":null}),n.email&&s.email&&(0,y.jsx)("span",{className:"error",children:n.email})]})}),(0,y.jsx)("div",{className:"buttons mt-8 ml-1.5",children:(0,y.jsx)("div",{className:"",children:(0,y.jsx)(b.Z,{type:"submit",value:F?"Adding...":"Submit",disabled:F})})})]})}})]})]})})}}}]);
//# sourceMappingURL=1127.5d966e76.chunk.js.map