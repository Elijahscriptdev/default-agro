"use strict";(self.webpackChunkagro_web=self.webpackChunkagro_web||[]).push([[332],{332:function(e,n,r){r.r(n);var l=r(4165),t=r(5861),a=r(1413),s=r(885),i=r(2791),o=r(9434),u=r(6871),c=r(3767),d=r(8870),v=r(3400),f=r(7692),m=r(8820),x=r(9373),g=r(7068),h=r(5865),p=r(5524),j=r(3168),Z=r(5497),w=r(2214),C=r(5163),k=r(890),H=r(38),b=r(9971),_=r(184);n.default=function(){var e,n,r=(0,u.s0)(),S=(0,i.useState)(1),y=(0,s.Z)(S,2),z=y[0],M=y[1],F=(0,i.useState)(10),I=(0,s.Z)(F,2),N=I[0],E=I[1],R=(0,i.useState)({}),A=(0,s.Z)(R,2),D=A[0],V=A[1],q=(0,o.v9)((function(e){return e.AuthReducer.userProfile||JSON.parse(sessionStorage.getItem("user_profile"))})),J=(0,o.v9)((function(e){var n;return null===(n=e.FarmMangementReducer.clusters)||void 0===n?void 0:n.data})),L=(0,o.v9)((function(e){var n;return(null===(n=e.FarmMangementReducer.clusters)||void 0===n?void 0:n.loading)||!1})),O=(0,i.useState)(null),P=(0,s.Z)(O,2),B=P[0],G=P[1],K=(0,i.useState)(!1),Q=(0,s.Z)(K,2),T=Q[0],U=Q[1],W=function(){U(!1)},X=(0,i.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(r){switch(e){case"add-cluster":G((0,_.jsx)(Z.Di,{closeHandler:W,roles:D}));break;case"edit-cluster":G((0,_.jsx)(Z.lg,{closeHandler:W,data:n,roles:D}));break;default:G(null)}U(!0)}}),[D]),Y=(0,i.useMemo)((function(){return[{Header:"S/N",accessor:"serial"},{Header:"Name",accessor:"name"},{Header:"Description",accessor:"description"},{Header:"Manager",Cell:function(e){e.value;var n,r,l=e.row.original;return(0,_.jsx)("span",{children:"".concat(null===(n=l.manager)||void 0===n?void 0:n.first_name," ").concat(null===(r=l.manager)||void 0===r?void 0:r.last_name)})}},{Header:"Cluster ID",accessor:"cluster_id"},{Header:"Cluster Size",Cell:function(e){e.value;var n=e.row.original;return(0,_.jsx)("span",{children:n.farms_sum_size?"".concat(n.farms_sum_size):"-"})}},{Header:"View",Cell:function(e){e.value;var n=e.row.original;return(0,_.jsx)(v.Z,{onClick:function(){r("/farm-management/clusters/".concat(n.id))},children:(0,_.jsx)(m.Zju,{})})}},{Header:"Edit",Cell:function(e){e.value;var n,r=e.row.original;return(0,_.jsx)(b.Z,{role:null===q||void 0===q||null===(n=q.my_role)||void 0===n?void 0:n.role,perform:"farm-management:cluster:edit",yes:function(){return(0,_.jsx)(v.Z,{onClick:X("edit-cluster",r),children:(0,_.jsx)(f.vpV,{})})},no:function(){return null}})}}]}),[null===q||void 0===q||null===(e=q.my_role)||void 0===e?void 0:e.role,X,r]),$=(0,i.useMemo)((function(){return(J||[]).map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{serial:n+z})}))}),[J,z]),ee=(0,i.useCallback)((0,t.Z)((0,l.Z)().mark((function e(){var n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H.Z.get("/all/roles");case 3:null!==(r=e.sent)&&void 0!==r&&null!==(n=r.result)&&void 0!==n&&n.roles&&V((function(e){var n,l={};return null===r||void 0===r||null===(n=r.result)||void 0===n||n.roles.forEach((function(e){l[e.role]=e.id})),l})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),ne=(0,o.I0)();return(0,i.useEffect)((function(){ee(),ne((0,C.zd)())}),[ne,ee]),(0,_.jsxs)(i.Fragment,{children:[(0,_.jsxs)("section",{children:[(0,_.jsx)("nav",{id:"quick-nav",children:(0,_.jsx)(h.Z,{breadcrumbs:[(0,_.jsx)(k.Z,{color:"inherit",children:"Farm Management"},"1"),(0,_.jsx)(k.Z,{color:"primary.main",children:"Farm Clusters"},"2")]})}),(0,_.jsxs)(c.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,_.jsxs)("h2",{className:"with-spinner",style:{fontSize:"20px"},children:[(0,_.jsx)("span",{children:"All Clusters"}),L?(0,_.jsx)(j.Z,{size:20,color:"primary"}):""]}),(0,_.jsx)(c.Z,{direction:"row",spacing:2,children:(0,_.jsx)(b.Z,{role:null===q||void 0===q||null===(n=q.my_role)||void 0===n?void 0:n.role,perform:"farm-management:cluster:create",yes:function(){return(0,_.jsx)(p.Z,{onClick:X("add-cluster"),value:"Add New Cluster",disableElevation:!0})},no:function(){return null}})})]}),(0,_.jsxs)(d.Z,{children:[(0,_.jsx)(x.Z,{columns:Y,data:$,isLoading:L}),(0,_.jsx)(g.Z,{nextHandler:function(){M(z+1)},prevHandler:function(){z>1&&M(z-1)},limitHandler:function(e){return function(e){E(parseInt(e.target.value))}(e)},totalRecords:J.length,limit:J.length||N,page:z})]})]}),(0,_.jsx)(w.Z,{open:T,closeHandler:W,children:B})]})}}}]);
//# sourceMappingURL=332.9bbb1eef.chunk.js.map