"use strict";(self.webpackChunkagro_web=self.webpackChunkagro_web||[]).push([[4649],{4649:function(e,n,r){r.r(n);var t=r(4165),o=r(5861),a=r(1413),i=r(885),s=r(2791),c=r(6871),l=r(3767),u=r(8870),d=r(3400),p=r(7865),f=r(911),m=r(6151),h=r(890),x=r(533),b=r(7425),v=r(5865),Z=r(3168),g=r(9373),j=r(7068),y=r(5497),w=r(2214),k=r(5163),C=r(184),S=r(1657).notify;function M(e){var n,r=e.handleModalOpen,t=s.useState(null),o=(0,i.Z)(t,2),a=o[0],c=o[1],l=Boolean(a),u=function(){c(null)};return(0,C.jsxs)("div",{children:[(0,C.jsx)(d.Z,{id:"basic-button","aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:function(e){c(e.currentTarget)},children:(0,C.jsx)(b.LB8,{})}),(0,C.jsxs)(f.Z,{id:"basic-menu",anchorEl:a,open:l,onClose:u,MenuListProps:{"aria-labelledby":"basic-button"},sx:{"& .MuiMenu-paper":{borderRadius:"15px",boxShadow:"0px 5px 20px rgba(108, 117, 125, 0.4)"}},children:[(0,C.jsx)(p.Z,{onClick:u,children:(0,C.jsx)(m.Z,{href:"/farm-management/edit-farm-unit/".concat(null===(n=e.data)||void 0===n?void 0:n.id),sx:{p:0,m:0,textTransform:"capitalize",color:"inherit",fontSize:"inherit","&:hover":{backgroundColor:"transparent"}},children:"View Farm Unit"})}),(0,C.jsx)(p.Z,{onClick:function(n){u(),r("view-map",e.data)(n)},children:"View Map"})]})]})}n.default=function(){var e=(0,s.useState)(1),n=(0,i.Z)(e,2),r=n[0],d=n[1],p=(0,s.useState)(10),f=(0,i.Z)(p,2),m=f[0],b=f[1],H=(0,c.UO)(),F=(0,s.useState)([]),L=(0,i.Z)(F,2),D=L[0],V=L[1],z=(0,s.useState)({}),A=(0,i.Z)(z,2),N=A[0],R=A[1],B=(0,s.useState)(!1),_=(0,i.Z)(B,2),I=_[0],T=_[1],O=(0,s.useState)(null),P=(0,i.Z)(O,2),W=P[0],q=P[1],E=(0,s.useState)(!1),U=(0,i.Z)(E,2),X=U[0],G=U[1],J=function(){G(!1)},K=(0,s.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(r){switch(e){case"add-sub-cluster":q((0,C.jsx)(y.j6,{closeHandler:J}));break;case"edit-sub-cluster":q((0,C.jsx)(y.fd,{closeHandler:J,data:n}));break;case"view-map":q((0,C.jsx)(y.Nw,{closeHandler:J,data:n}));break;default:q(null)}G(!0)}}),[]),Q=(0,s.useMemo)((function(){return[{Header:"S/N",accessor:"serial"},{Header:"Lot ID",accessor:"id"},{Header:"Size",accessor:"size"},{Header:"Crop",Cell:function(e){e.value;var n=e.row.original;return(0,C.jsx)("span",{children:"".concat(n.crop)})}},{Header:"Farmer",accessor:"farmer"},{Header:"Actions",Cell:function(e){e.value;var n=e.row.original;return(0,C.jsx)(M,{data:n,handleModalOpen:K,handleModalClose:J})}}]}),[K]),Y=(0,s.useMemo)((function(){return(D||[]).map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{serial:n+r})}))}),[D,r]);return(0,s.useEffect)((function(){!function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("loading sub-cluster..."),e.prev=1,T(!0),e.next=5,(0,k.XW)(n);case 5:(r=e.sent)?(V(r.farms),R(r)):S("Failed to get farm lots",{type:"error"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),S(e.t0,{type:"error"});case 12:return e.prev=12,T(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(n){return e.apply(this,arguments)}}()(H.subClusterId)}),[H.subClusterId]),(0,C.jsxs)(s.Fragment,{children:[(0,C.jsxs)("section",{children:[(0,C.jsx)("nav",{id:"quick-nav",children:(0,C.jsx)(v.Z,{breadcrumbs:[(0,C.jsx)(h.Z,{color:"inherit",children:"Farm Management"},"1"),(0,C.jsx)(x.Z,{underline:"hover",color:"inherit",href:"/farm-management/sub-clusters",children:"Manage Sub Clusters"},"2"),(0,C.jsx)(h.Z,{color:"primary.main",children:"View Lots"},"3")]})}),(0,C.jsx)(l.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:(0,C.jsxs)("h2",{className:"with-spinner",style:{fontSize:"20px"},children:[(0,C.jsx)("span",{children:null!==N&&void 0!==N&&N.sub_cluster_id?"".concat(N.sub_cluster_id," Farm Lots"):"Farm Lots"}),I?(0,C.jsx)(Z.Z,{size:20,color:"primary"}):""]})}),(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(g.Z,{columns:Q,data:Y,isLoading:I}),(0,C.jsx)(j.Z,{nextHandler:function(){d(r+1)},prevHandler:function(){r>1&&d(r-1)},limitHandler:function(e){return function(e){b(parseInt(e.target.value))}(e)},totalRecords:D.length,limit:m||D.length,page:r})]})]}),(0,C.jsx)(w.Z,{open:X,closeHandler:J,children:W})]})}},533:function(e,n,r){r.d(n,{Z:function(){return M}});var t=r(2982),o=r(885),a=r(4942),i=r(3366),s=r(7462),c=r(2791),l=r(8182),u=r(4419),d=r(4036),p=r(7630),f=r(1046),m=r(3031),h=r(2071),x=r(890),b=r(1217);function v(e){return(0,b.Z)("MuiLink",e)}var Z=(0,r(5878).Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),g=r(8529),j=r(2065),y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},w=function(e){var n=e.theme,r=e.ownerState,t=function(e){return y[e]||e}(r.color),o=(0,g.D)(n,"palette.".concat(t),!1)||r.color,a=(0,g.D)(n,"palette.".concat(t,"Channel"));return"vars"in n&&a?"rgba(".concat(a," / 0.4)"):(0,j.Fq)(o,.4)},k=r(184),C=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],S=(0,p.ZP)(x.Z,{name:"MuiLink",slot:"Root",overridesResolver:function(e,n){var r=e.ownerState;return[n.root,n["underline".concat((0,d.Z)(r.underline))],"button"===r.component&&n.button]}})((function(e){var n=e.theme,r=e.ownerState;return(0,s.Z)({},"none"===r.underline&&{textDecoration:"none"},"hover"===r.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===r.underline&&(0,s.Z)({textDecoration:"underline"},"inherit"!==r.color&&{textDecorationColor:w({theme:n,ownerState:r})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===r.component&&(0,a.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(Z.focusVisible),{outline:"auto"}))})),M=c.forwardRef((function(e,n){var r=(0,f.Z)({props:e,name:"MuiLink"}),a=r.className,p=r.color,x=void 0===p?"primary":p,b=r.component,Z=void 0===b?"a":b,g=r.onBlur,j=r.onFocus,w=r.TypographyClasses,M=r.underline,H=void 0===M?"always":M,F=r.variant,L=void 0===F?"inherit":F,D=r.sx,V=(0,i.Z)(r,C),z=(0,m.Z)(),A=z.isFocusVisibleRef,N=z.onBlur,R=z.onFocus,B=z.ref,_=c.useState(!1),I=(0,o.Z)(_,2),T=I[0],O=I[1],P=(0,h.Z)(n,B),W=(0,s.Z)({},r,{color:x,component:Z,focusVisible:T,underline:H,variant:L}),q=function(e){var n=e.classes,r=e.component,t=e.focusVisible,o=e.underline,a={root:["root","underline".concat((0,d.Z)(o)),"button"===r&&"button",t&&"focusVisible"]};return(0,u.Z)(a,v,n)}(W);return(0,k.jsx)(S,(0,s.Z)({color:x,className:(0,l.Z)(q.root,a),classes:w,component:Z,onBlur:function(e){N(e),!1===A.current&&O(!1),g&&g(e)},onFocus:function(e){R(e),!0===A.current&&O(!0),j&&j(e)},ref:P,ownerState:W,variant:L,sx:[].concat((0,t.Z)(Object.keys(y).includes(x)?[]:[{color:x}]),(0,t.Z)(Array.isArray(D)?D:[D]))},V))}))}}]);
//# sourceMappingURL=4649.201d1aa5.chunk.js.map