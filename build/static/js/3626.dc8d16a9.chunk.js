"use strict";(self.webpackChunkagro_web=self.webpackChunkagro_web||[]).push([[3626],{4496:function(e,n,r){r(2791);var a=r(184);n.Z=function(e){var n=e.value,r=e.type,t={boxSizing:"border-box",width:"auto",height:"26px",padding:"8px",borderRadius:"13px",borderWidth:"0.6px",display:"flex",justifyContent:"center",alignItems:"center"},o={fontSize:"12px",fontWeight:600,display:"block"};switch(void 0===r?"pending":r){case"success":t.backgroundColor="#F6FFED",t.borderColor="#B7EB8F",o.color="#52C41A";break;case"pending":t.backgroundColor="#FFF7E6",t.borderColor="#FA8C16",o.color="#FA8C16";break;default:t.backgroundColor="#FFF1F0",t.borderColor="#F5222D",o.color="#F5222D"}return(0,a.jsx)("div",{style:t,children:(0,a.jsx)("span",{style:o,children:n})})}},3626:function(e,n,r){r.r(n);var a=r(885),t=r(2791),o=r(7692),l=r(9434),s=r(2426),i=r.n(s),d=r(6871),u=r(3767),c=r(8870),m=r(890),p=r(3466),x=r(3400),v=r(6416),f=r(9373),h=r(7068),g=r(3715),j=r(5013),F=r(4496),b=r(5865),Z=r(5524),C=r(2214),w=r(5750),y=r(1350),_=r(4298),S=r(9971),k=r(1682),H=r(184);n.default=function(){var e,n,r,s=(0,l.I0)(),A=(0,d.s0)(),R=(0,l.v9)((function(e){return e.UserManagementReducer.farmers})),N=(0,t.useState)(1),E=(0,a.Z)(N,2),D=E[0],I=E[1],M=(0,t.useState)(15),z=(0,a.Z)(M,2),L=z[0],W=z[1],G=(0,t.useState)(""),P=(0,a.Z)(G,2),U=P[0],Y=P[1],O=(0,t.useState)(""),B=(0,a.Z)(O,2),q=B[0],J=B[1],T=(0,t.useState)(""),V=(0,a.Z)(T,2),K=V[0],Q=V[1],X=(0,t.useState)(""),$=(0,a.Z)(X,2),ee=$[0],ne=$[1],re=(0,t.useState)(""),ae=(0,a.Z)(re,2),te=ae[0],oe=ae[1],le=(0,t.useState)(null),se=(0,a.Z)(le,2),ie=se[0],de=se[1],ue=(0,t.useState)(!1),ce=(0,a.Z)(ue,2),me=ce[0],pe=ce[1],xe=(0,l.v9)((function(e){return e.AuthReducer.userProfile||JSON.parse(sessionStorage.getItem("user_profile"))})),ve=(0,l.v9)((function(e){var n;return(null===(n=e.AppReducer)||void 0===n?void 0:n.states)||{}})),fe=(0,l.v9)((function(e){var n;return(null===(n=e.AppReducer)||void 0===n?void 0:n.localGovt)||[]})),he=(0,t.useRef)(null),ge=function(){pe(!1)},je=(0,t.useCallback)((function(e){return function(n){if("upload-farmers"===e)de((0,H.jsx)(k._6,{closeHandler:ge}));else de(null);pe(!0)}}),[]);(0,t.useEffect)((function(){var e={page:D,per_page:L,search_farmer_by_name:U};""!==K?e.state=K:delete e.state,""!==q?e.status=q:delete e.status,""!==ee?e.lga=ee:delete e.lga,""!==te?e.season=te:delete e.season,s((0,w.n9)(e)),s((0,_.Pz)())}),[s,D,L,q,K,ee,te,U]);var Fe=(0,t.useMemo)((function(){return[{Header:"Surname",accessor:"last_name"},{Header:"Other Names",Cell:function(e){e.value;var n,r=e.row.original;return(0,H.jsx)("span",{style:{textTransform:"capitalize"},children:"".concat(r.first_name," ").concat(null===r||void 0===r||null===(n=r.middle_name)||void 0===n?void 0:n.charAt(0).toUpperCase(),".")})}},{Header:"Mobile",accessor:"mobile"},{Header:"Status",Cell:function(e){e.value;var n=e.row.original;return(0,H.jsx)(F.Z,{value:n.status?"Farm Added":"Farm Not Added",type:n.status?"success":"error"})}},{Header:"State",accessor:"state.name"},{Header:"LGA",accessor:"lga.local_name"},{Header:"Date Created",accessor:"date_created",Cell:function(e){e.value;var n=e.row.original;return(0,H.jsxs)(u.Z,{direction:"column",spacing:.2,children:[(0,H.jsx)("span",{children:i()(n.date_created).format("YYYY-MM-DD")}),(0,H.jsx)(m.Z,{variant:"span",fontSize:"12px",sx:{color:function(e){return e.palette.primary.main}},children:i()(n.date_created).format("HH:mm:ss")})]})}},{Header:"Edit",Cell:function(e){e.value;var n,r=e.row.original;return(0,H.jsx)(S.Z,{role:null===xe||void 0===xe||null===(n=xe.my_role)||void 0===n?void 0:n.role,perform:"farmer:edit",yes:function(){return(0,H.jsx)(x.Z,{href:"/user-management/edit-farmer/".concat(r.id),children:(0,H.jsx)(o.vpV,{})})},no:function(){return null}})}}]}),[null===xe||void 0===xe||null===(e=xe.my_role)||void 0===e?void 0:e.role]),be=(0,t.useMemo)((function(){return R.data||[]}),[R]);return(0,H.jsxs)(t.Fragment,{children:[(0,H.jsxs)("section",{children:[(0,H.jsx)("nav",{id:"quick-nav",children:(0,H.jsx)(b.Z,{breadcrumbs:[(0,H.jsx)(m.Z,{color:"inherit",children:"User Management"},"1"),(0,H.jsx)(m.Z,{color:"primary.main",children:"Manage Farmers"},"2")]})}),(0,H.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{flexWrap:{xs:"wrap",lg:"nowrap"}},children:[(0,H.jsx)(g.Z,{InputProps:{ref:he,startAdornment:(0,H.jsx)(p.Z,{position:"start",children:(0,H.jsx)(v.o,{fontSize:"small"})})},value:U,onChange:function(e){return Y(e.target.value)},placeholder:"Search",sx:{width:"100%",maxWidth:{sm:"300px"}}}),(0,H.jsxs)(u.Z,{direction:"row",spacing:2,sx:{mt:{xs:2,lg:0},mb:{xs:2,lg:0}},children:[(0,H.jsx)(S.Z,{role:null===xe||void 0===xe||null===(n=xe.my_role)||void 0===n?void 0:n.role,perform:"farmer:create",yes:function(){return(0,H.jsx)(Z.Z,{href:"/user-management/add-farmer",value:"Add New Farmer",disableElevation:!0})},no:function(){return null},data:null}),(0,H.jsx)(S.Z,{role:null===xe||void 0===xe||null===(r=xe.my_role)||void 0===r?void 0:r.role,perform:"farmers:upload",yes:function(){return(0,H.jsx)(Z.Z,{onClick:je("upload-farmers"),value:"Upload Farmers",disableElevation:!0})},no:function(){return null},data:null})]})]}),(0,H.jsxs)("div",{className:"farmmanagementheader flex flex-row items-stretch overflow-x-auto",children:[(0,H.jsxs)("div",{style:{flexGrow:1},children:[(0,H.jsx)("span",{className:"filtertext mr-2 ml-2",children:"Filter by:"}),(0,H.jsxs)(u.Z,{direction:"row",alignItems:"center",flexWrap:"wrap",children:[(0,H.jsx)("div",{className:"mr-2 ml-2 component-wrapper",children:(0,H.jsx)(j.Z,{width:"100%",height:"32px",borderRadius:"5px",backgroundColor:"#FFFFFF",noneLabel:(0,H.jsx)("em",{children:"Status"}),options:[{name:"Farm Added",value:1},{name:"Farm Not Added",value:0}],onChange:function(e){return J(e.target.value)}})}),(0,H.jsx)("div",{className:"mr-2 ml-2 component-wrapper",children:(0,H.jsx)(j.Z,{width:"100%",height:"32px",noneLabel:(0,H.jsx)("em",{children:"State"}),options:Object.values(ve).map((function(e){return{name:e.name,value:e.state_id}})),sx:{borderRadius:"5px"},backgroundColor:"#FFFFFF",onChange:function(e){console.log({state:e.target.value}),e.target.value?(Q(e.target.value),s((0,_.zW)(e.target.value))):(ne(""),Q(""),s({type:y.UZ,payload:{localGovt:[]}}))}})}),(0,H.jsx)("div",{className:"mr-2 ml-2 component-wrapper",children:(0,H.jsx)(j.Z,{width:"100%",height:"32px",noneLabel:(0,H.jsx)("em",{children:"LGA"}),options:fe.map((function(e){return{name:e.local_name,value:e.local_id}})),borderRadius:"5px",backgroundColor:"#FFFFFF",onChange:function(e){return ne(e.target.value)}})}),(0,H.jsx)("div",{className:"mr-2 ml-2 component-wrapper",children:(0,H.jsx)(j.Z,{width:"100%",height:"32px",noneLabel:(0,H.jsx)("em",{children:"Season"}),options:[{name:"Rainy Season",value:"Rainy"},{name:"Dry Season",value:"Dry"},{name:"Harmattan",value:"harmattan"}],borderRadius:"5px",backgroundColor:"#FFFFFF",onChange:function(e){return oe(e.target.value)}})})]})]}),xe.tenant&&xe.tenant_id?(0,H.jsx)("div",{className:"flex mr-2 ml-2 component-wrapper",style:{justifyContent:"flex-end",alignItems:"flex-end"},children:(0,H.jsx)(Z.Z,{value:"Export data",disableElevation:!0,onClick:function(e){var n,r,a={tenant:null===xe||void 0===xe||null===(n=xe.tenant)||void 0===n?void 0:n.id,tenant_id:null===xe||void 0===xe||null===(r=xe.tenant)||void 0===r?void 0:r.tenant_id};s((0,w.Cm)(a,A))},sx:{color:function(e){return e.palette.primary.main},backgroundColor:"white",height:"32px"}})}):null]}),(0,H.jsxs)(c.Z,{children:[(0,H.jsx)(f.Z,{columns:Fe,data:be,isLoading:R.loading}),(0,H.jsx)(h.Z,{nextHandler:function(){I(D+1)},prevHandler:function(){D>1&&I(D-1)},limitHandler:function(e){return function(e){W(parseInt(e.target.value))}(e)},totalRecords:R.total,page:D,limit:L})]})]}),(0,H.jsx)(C.Z,{open:me,closeHandler:ge,PaperProps:{sx:{maxWidth:"unset"}},children:ie})]})}}}]);
//# sourceMappingURL=3626.dc8d16a9.chunk.js.map