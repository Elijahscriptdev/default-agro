"use strict";(self.webpackChunkagro_web=self.webpackChunkagro_web||[]).push([[9120],{7068:function(e,r,t){t(2791);var n=t(4373),u=t(184);r.Z=function(e){var r=e.nextHandler,t=e.prevHandler,s=e.limitHandler,a=e.page,o=e.totalRecords,c=void 0===o?0:o,l=e.limit,i=void 0===l?1:l,p=e.showLimit,d=void 0===p||p,f=e.hideOnMobile,v=void 0!==f&&f,h=Math.ceil(c/i);return(0,u.jsxs)("div",{className:"flex justify-end table-controls ".concat(v?"hide-on-mobile":""," "),children:[d&&"false"!==d&&!1!==d?(0,u.jsxs)("div",{className:"filter-input mr-5",children:[(0,u.jsx)("label",{children:"Rows per page: "}),(0,u.jsxs)("select",{onChange:s,children:[(0,u.jsx)("option",{value:"15",children:"15"}),(0,u.jsx)("option",{value:"25",children:"25"}),(0,u.jsx)("option",{value:"50",children:"50"}),(0,u.jsx)("option",{value:"100",children:"100"})]})]}):null,(0,u.jsxs)("div",{className:"flex text-green-500",children:[(0,u.jsxs)("p",{className:"px-4",children:["Viewing ",(a-1)*i+1," -"," ",i*a>c?c:i*a," of"," ",c]}),(0,u.jsx)("button",{disabled:a<=1,onClick:t,children:(0,u.jsx)(n.u1R,{})}),(0,u.jsx)("button",{disabled:a>=h,onClick:r,children:(0,u.jsx)(n.hjJ,{})})]})]})}},4496:function(e,r,t){t(2791);var n=t(184);r.Z=function(e){var r=e.value,t=e.type,u={boxSizing:"border-box",width:"auto",height:"26px",padding:"8px",borderRadius:"13px",borderWidth:"0.6px",display:"flex",justifyContent:"center",alignItems:"center"},s={fontSize:"12px",fontWeight:600,display:"block"};switch(void 0===t?"pending":t){case"success":u.backgroundColor="#F6FFED",u.borderColor="#B7EB8F",s.color="#52C41A";break;case"pending":u.backgroundColor="#FFF7E6",u.borderColor="#FA8C16",s.color="#FA8C16";break;default:u.backgroundColor="#FFF1F0",u.borderColor="#F5222D",s.color="#F5222D"}return(0,n.jsx)("div",{style:u,children:(0,n.jsx)("span",{style:s,children:r})})}},8217:function(e,r,t){t.r(r);var n=t(1413),u=t(4165),s=t(5861),a=t(885),o=t(2791),c=t(7692),l=t(9434),i=t(2426),p=t.n(i),d=t(3767),f=t(8870),v=t(890),h=t(3400),x=t(9373),m=t(7068),y=t(4496),Z=t(5865),g=t(5750),b=t(9971),w=t(9072),j=t(3168),k=t(184);r.default=function(){var e,r=(0,o.useState)([]),t=(0,a.Z)(r,2),i=t[0],F=t[1],C=(0,o.useState)(1),P=(0,a.Z)(C,2),H=P[0],D=P[1],S=(0,o.useState)(15),_=(0,a.Z)(S,2),M=_[0],N=_[1],E=(0,o.useState)(!1),R=(0,a.Z)(E,2),U=R[0],V=R[1],z=(0,l.v9)((function(e){return e.AuthReducer.userProfile||JSON.parse(sessionStorage.getItem("user_profile"))})),A=(0,o.useCallback)((0,s.Z)((0,u.Z)().mark((function e(){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,V(!0),e.next=4,(0,g.sg)({page:H,limit:M});case 4:r=e.sent,console.log(r),F((null===r||void 0===r?void 0:r.data)||[]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.prev=12,V(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),[M,H]);(0,o.useEffect)((function(){A()}),[A]);var O=(0,o.useMemo)((function(){return[{Header:"Name",accessor:"name"},{Header:"Status",Cell:function(e){e.value;var r=e.row.original,t=function(e){switch(!0){case"Completed"===e.status:return{value:e.status,type:"success"};case"Failed"===e.status:return{value:e.status,type:"error"};case"Pending"===e.status:return{value:e.status,type:"pending"};default:return null}}(r);return t?(0,k.jsx)(y.Z,(0,n.Z)({},t)):(0,k.jsx)("span",{children:r.status})}},{Header:"Date Created",accessor:"date_created",Cell:function(e){e.value;var r=e.row.original;return(0,k.jsxs)(d.Z,{direction:"column",spacing:.2,children:[(0,k.jsx)("span",{children:p()(r.date_created).format("YYYY-MM-DD")}),(0,k.jsx)(v.Z,{variant:"span",fontSize:"12px",sx:{color:function(e){return e.palette.primary.main}},children:p()(r.date_created).format("HH:mm:ss")})]})}},{Header:"Download KYF",Cell:function(e){e.value;var r,t=e.row.original;return(0,k.jsx)(b.Z,{role:null===z||void 0===z||null===(r=z.my_role)||void 0===r?void 0:r.role,perform:"farmer:export:download-kyf",yes:function(){return(0,k.jsx)(h.Z,{href:"/user-management/edit-farmer/".concat(t.id),children:(0,k.jsx)(c.vpV,{})})},no:function(){var e;return(0,k.jsx)(w.Z,{title:"".concat(null===z||void 0===z||null===(e=z.my_role)||void 0===e?void 0:e.role," cannot perform this action"),children:(0,k.jsx)(h.Z,{disabled:!0,children:(0,k.jsx)(c.vpV,{})})})}})}},{Header:"Download Coordinates",Cell:function(e){e.value;var r,t=e.row.original;return(0,k.jsx)(b.Z,{role:null===z||void 0===z||null===(r=z.my_role)||void 0===r?void 0:r.role,perform:"farmer:export:download-coordinates",yes:function(){return(0,k.jsx)(h.Z,{href:"/user-management/edit-farmer/".concat(t.id),children:(0,k.jsx)(c.vpV,{})})},no:function(){var e;return(0,k.jsx)(w.Z,{title:"".concat(null===z||void 0===z||null===(e=z.my_role)||void 0===e?void 0:e.role," cannot perform this action"),children:(0,k.jsx)(h.Z,{disabled:!0,children:(0,k.jsx)(c.vpV,{})})})}})}}]}),[null===z||void 0===z||null===(e=z.my_role)||void 0===e?void 0:e.role]),Y=(0,o.useMemo)((function(){return i}),[i]);return(0,k.jsx)(o.Fragment,{children:(0,k.jsxs)("section",{children:[(0,k.jsx)("nav",{id:"quick-nav",children:(0,k.jsx)(Z.Z,{breadcrumbs:[(0,k.jsx)(v.Z,{color:"inherit",children:"User Management"},"1"),(0,k.jsx)(v.Z,{color:"inherit",children:"Manage Farmers"},"2"),(0,k.jsx)(v.Z,{color:"primary.main",children:"Exports"},"3")]})}),(0,k.jsxs)("h2",{className:"with-spinner",style:{fontSize:"20px"},children:[(0,k.jsx)("span",{children:"All Exports"}),U?(0,k.jsx)(j.Z,{size:20,color:"primary"}):""]}),(0,k.jsxs)(f.Z,{children:[(0,k.jsx)(x.Z,{columns:O,data:Y,isLoading:U}),(0,k.jsx)(m.Z,{nextHandler:function(){D(H+1)},prevHandler:function(){H>1&&D(H-1)},limitHandler:function(e){return function(e){N(parseInt(e.target.value))}(e)},totalRecords:i.length,page:H,limit:M})]})]})})}},5750:function(e,r,t){t.d(r,{NM:function(){return y},qH:function(){return k},cn:function(){return d},PH:function(){return g},x7:function(){return f},AI:function(){return F},h8:function(){return h},Cm:function(){return b},sg:function(){return w},n9:function(){return x},wM:function(){return m},ZO:function(){return j},Rf:function(){return p},fP:function(){return Z},Nq:function(){return v}});var n=t(4165),u=t(5861),s=t(38),a=t(1657),o=t(3528),c=t(4028);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new FormData;return Object.keys(e).length>0&&(console.log({body:e}),Object.keys(e).forEach((function(t){r.append(t,e[t])}))),r}var i=t(4329),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){var u,a,l,p;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=e.page||1,a=e.limit||10,l=(0,c.r)(e),t({type:i.Ny}),e=(0,c.r)(e),r.prev=5,r.next=8,s.Z.get("/viewusers?page=".concat(u,"&limit=").concat(a,"&query=").concat(l));case 8:p=r.sent,t({type:i.Oz,payload:p}),r.next=18;break;case 12:return r.prev=12,r.t0=r.catch(5),console.log(r.t0),t({type:i.wX}),(0,o.P)(r.t0,"Failed to fetch users"),r.abrupt("return",r.t0);case 18:case"end":return r.stop()}}),r,null,[[5,12]])})));return function(e){return r.apply(this,arguments)}}()},d=function(e){return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){var u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.Z.post("/users",e);case 3:if(null===(u=r.sent)||void 0===u||!u.success||null===u||void 0===u||!u.result){r.next=8;break}return(0,a.notify)("User added successfully",{type:"success"}),t({type:i.qH,payload:u.result}),r.abrupt("return",u);case 8:r.next=16;break;case 10:return r.prev=10,r.t0=r.catch(0),console.log(r.t0),t({type:i.Jh}),(0,o.P)(r.t0,"Failed to add user"),r.abrupt("return",r.t0);case 16:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()},f=function(e){return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){var u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=l(e),r.next=4,(0,s.V)("formData").post("/users/bulk-upload",e,{});case 4:null!==(u=r.sent)&&void 0!==u&&u.success&&null!==u&&void 0!==u&&u.result&&((0,a.notify)("Users uploaded successfully",{type:"success"}),t(p({page:1}))),r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(0),console.log(r.t0),(0,o.P)(r.t0,"Failed to upload users"),r.abrupt("return",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},v=function(e,r){return function(){var t=(0,u.Z)((0,n.Z)().mark((function t(u){var c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.Z.patch("/users/".concat(e),r);case 3:if(null===(c=t.sent)||void 0===c||!c.success||null===c||void 0===c||!c.result){t.next=7;break}return(0,a.notify)("User Updated successfully",{type:"success"}),t.abrupt("return",c);case 7:t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(0),console.log(t.t0),(0,o.P)(t.t0,"Failed to update user"),t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.Z.delete("/users/".concat(e));case 3:r.sent&&((0,a.notify)("User deleted successfully",{type:"success"}),t(p({page:1}))),r.next=12;break;case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),(0,o.P)(r.t0,"Failed to delete user"),r.abrupt("return",r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){var u,a;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:i._l}),e=(0,c.r)(e),r.prev=2,r.next=5,s.Z.get("/farmers".concat(e));case 5:null!==(u=r.sent)&&void 0!==u&&u.success&&null!==u&&void 0!==u&&u.result?t({type:i.cj,payload:null===u||void 0===u||null===(a=u.result)||void 0===a?void 0:a.data}):t({type:i.eZ}),r.next=15;break;case 9:return r.prev=9,r.t0=r.catch(2),console.log(r.t0),t({type:i.eZ}),(0,o.P)(r.t0),r.abrupt("return",r.t0);case 15:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}()},m=function(){var e=(0,u.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("/farmers/".concat(r));case 3:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.result);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}(),y=function(e){return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){var u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.Z.post("/farmers",e);case 3:return null!==(u=r.sent)&&void 0!==u&&u.success&&null!==u&&void 0!==u&&u.result&&((0,a.notify)("Farmer added successfully",{type:"success"}),t({type:i.Du,payload:u.result}),t(x({page:1}))),r.abrupt("return",u);case 8:return r.prev=8,r.t0=r.catch(0),console.log(r.t0),t({type:i.$0}),(0,o.P)(r.t0,"Failed to add farmer"),r.abrupt("return",r.t0);case 14:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},Z=function(e,r){return function(){var t=(0,u.Z)((0,n.Z)().mark((function t(u){var c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.Z.patch("/farmers/".concat(e),r);case 3:return null!==(c=t.sent)&&void 0!==c&&c.success&&null!==c&&void 0!==c&&c.result&&(0,a.notify)("Farmer updated successfully",{type:"success"}),t.abrupt("return",c);case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),(0,o.P)(t.t0,"Failed to update farmer"),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){var u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=l(e),r.next=4,(0,s.V)("formData")({method:"post",url:"/farmers/bulk-upload",data:e});case 4:null!==(u=r.sent)&&void 0!==u&&u.success&&null!==u&&void 0!==u&&u.result&&((0,a.notify)("Farmers uploaded successfully",{type:"success"}),t(x({page:1}))),r.next=13;break;case 8:return r.prev=8,r.t0=r.catch(0),console.log(r.t0),(0,o.P)(r.t0,"Failed to add farmer"),r.abrupt("return",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()},b=function(e,r){return function(){var t=(0,u.Z)((0,n.Z)().mark((function t(u){var c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.Z.post("/farmers/downloads/process-farmer-details",e);case 3:null!==(c=t.sent)&&void 0!==c&&c.success&&null!==c&&void 0!==c&&c.result&&((0,a.notify)("Farmers exported successfully",{type:"success"}),r("/user-management/farmers/exports")),t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),(0,o.P)(t.t0,"Failed to export farmers"),t.abrupt("return",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},w=function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){var r,t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.get("/farmers/downloads");case 3:if(null===(r=e.sent)||void 0===r||!r.success||null===r||void 0===r||!r.result){e.next=6;break}return e.abrupt("return",null===r||void 0===r||null===(t=r.result)||void 0===t?void 0:t.data);case 6:return e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),(0,o.P)(e.t0,"Failed to fetch exports"),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){var u,a;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t({type:i.jt}),e=(0,c.r)(e),r.prev=2,r.next=5,s.Z.get("/sourcing-partners".concat(e));case 5:a=r.sent,t({type:i.rE,payload:null===a||void 0===a||null===(u=a.result)||void 0===u?void 0:u.sourcing_partners}),r.next=15;break;case 9:return r.prev=9,r.t0=r.catch(2),console.log(r.t0),t({type:i.ZU}),(0,o.P)(r.t0,"Failed to fetch sourcing agents"),r.abrupt("return",r.t0);case 15:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e){return r.apply(this,arguments)}}()},k=function(e){return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){var u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.Z.post("/sourcing-partners",e);case 3:return u=r.sent,console.log(u),null!==u&&void 0!==u&&u.success&&null!==u&&void 0!==u&&u.result&&((0,a.notify)("Sourcing agent added successfully",{type:"success"}),t({type:i.YJ,payload:u.result})),r.abrupt("return",u);case 9:return r.prev=9,r.t0=r.catch(0),console.log(r.t0),t({type:i.Dv}),(0,o.P)(r.t0,"Failed to add sourcing agent"),r.abrupt("return",r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},F=function(e){return function(){var r=(0,u.Z)((0,n.Z)().mark((function r(t){return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s.Z.delete("/sourcing-partners/".concat(e));case 3:r.sent&&((0,a.notify)("Sourcing agent deleted successfully",{type:"success"}),t(j({page:1}))),r.next=12;break;case 7:return r.prev=7,r.t0=r.catch(0),console.log(r.t0),(0,o.P)(r.t0,"Failed to delete sourcing agent"),r.abrupt("return",r.t0);case 12:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=9120.8d729ef7.chunk.js.map