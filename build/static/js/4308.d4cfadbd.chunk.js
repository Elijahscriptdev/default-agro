"use strict";(self.webpackChunkagro_web=self.webpackChunkagro_web||[]).push([[4308],{4308:function(e,n,r){r.r(n);var l=r(4165),t=r(5861),s=r(1413),a=r(885),u=r(2791),i=r(9434),o=r(6871),c=r(890),d=r(3767),f=r(8870),v=r(3400),m=r(5524),x=r(7692),g=r(8820),h=r(3168),j=r(9373),p=r(7068),Z=r(5865),b=r(5497),C=r(2214),w=r(5163),k=r(38),H=r(9971),S=r(184);n.default=function(){var e,n,r=(0,o.s0)(),_=(0,i.v9)((function(e){var n;return null===(n=e.FarmMangementReducer.subClusters)||void 0===n?void 0:n.data})),y=(0,i.v9)((function(e){var n;return(null===(n=e.FarmMangementReducer.subClusters)||void 0===n?void 0:n.loading)||!1})),M=(0,i.v9)((function(e){return e.AuthReducer.userProfile||JSON.parse(sessionStorage.getItem("user_profile"))})),z=(0,u.useState)(null),I=(0,a.Z)(z,2),N=I[0],A=I[1],E=(0,u.useState)(!1),F=(0,a.Z)(E,2),R=F[0],D=F[1],V=(0,u.useState)(1),q=(0,a.Z)(V,2),J=q[0],L=q[1],O=(0,u.useState)(_.length),P=(0,a.Z)(O,2),Y=P[0],B=P[1],G=(0,u.useState)({}),K=(0,a.Z)(G,2),Q=K[0],T=K[1],U=function(){D(!1)},W=(0,u.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(r){switch(e){case"add-sub-cluster":A((0,S.jsx)(b.j6,{closeHandler:U,roles:Q}));break;case"edit-sub-cluster":A((0,S.jsx)(b.fd,{closeHandler:U,data:n,roles:Q}));break;default:A(null)}D(!0)}}),[Q]),X=(0,u.useMemo)((function(){return[{Header:"S/N",accessor:"serial"},{Header:"Name",accessor:"name"},{Header:"Description",accessor:"description"},{Header:"Agent",Cell:function(e){e.value;var n,r,l=e.row.original;return(0,S.jsx)("span",{children:"".concat(null===(n=l.agent)||void 0===n?void 0:n.first_name," ").concat(null===(r=l.agent)||void 0===r?void 0:r.last_name)})}},{Header:"Cluster ID",accessor:"cluster"},{Header:"Cluster Size",Cell:function(e){e.value;var n=e.row.original;return(0,S.jsx)("span",{children:n.farms_sum_size?"".concat(n.farms_sum_size):"-"})}},{Header:"View",Cell:function(e){e.value;var n=e.row.original;return(0,S.jsx)(v.Z,{onClick:function(){r("/farm-management/sub-clusters/".concat(n.id))},children:(0,S.jsx)(g.Zju,{})})}},{Header:"Edit",Cell:function(e){e.value;var n,r=e.row.original;return(0,S.jsx)(H.Z,{role:null===M||void 0===M||null===(n=M.my_role)||void 0===n?void 0:n.role,perform:"farm-management:sub-cluster:edit",yes:function(){return(0,S.jsx)(v.Z,{onClick:W("edit-sub-cluster",r),children:(0,S.jsx)(x.vpV,{})})},no:function(){return null}})}}]}),[null===M||void 0===M||null===(e=M.my_role)||void 0===e?void 0:e.role,W,r]),$=(0,u.useMemo)((function(){return(_||[]).map((function(e,n){return(0,s.Z)((0,s.Z)({},e),{},{serial:n+J})}))}),[_,J]),ee=(0,u.useCallback)((0,t.Z)((0,l.Z)().mark((function e(){var n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.Z.get("/all/roles");case 3:null!==(r=e.sent)&&void 0!==r&&null!==(n=r.result)&&void 0!==n&&n.roles&&T((function(e){var n,l={};return null===r||void 0===r||null===(n=r.result)||void 0===n||n.roles.forEach((function(e){l[e.role]=e.id})),l})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),ne=(0,i.I0)();return(0,u.useEffect)((function(){ee(),ne((0,w.aY)())}),[ne,ee]),(0,S.jsxs)(u.Fragment,{children:[(0,S.jsxs)("section",{children:[(0,S.jsx)("nav",{id:"quick-nav",children:(0,S.jsx)(Z.Z,{breadcrumbs:[(0,S.jsx)(c.Z,{color:"inherit",children:"Farm Management"},"1"),(0,S.jsx)(c.Z,{color:"primary.main",children:"Manage Sub Clusters"},"2")]})}),(0,S.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,S.jsxs)("h2",{className:"with-spinner",style:{fontSize:"20px"},children:[(0,S.jsx)("span",{children:"All Sub Clusters"}),y?(0,S.jsx)(h.Z,{size:20,color:"primary"}):""]}),(0,S.jsx)(d.Z,{direction:"row",children:(0,S.jsx)(H.Z,{role:null===M||void 0===M||null===(n=M.my_role)||void 0===n?void 0:n.role,perform:"farm-management:sub-cluster:create",yes:function(){return(0,S.jsx)(m.Z,{onClick:W("add-sub-cluster"),value:"Add New Sub-Cluster",disableElevation:!0})},no:function(){return null}})})]}),(0,S.jsxs)(f.Z,{children:[(0,S.jsx)(j.Z,{columns:X,data:$,isLoading:y}),(0,S.jsx)(p.Z,{nextHandler:function(){L(J+1)},prevHandler:function(){J>1&&L(J-1)},limitHandler:function(e){return function(e){B(parseInt(e.target.value))}(e)},totalRecords:_.length,limit:_.length||Y,page:J})]})]}),(0,S.jsx)(C.Z,{open:R,closeHandler:U,children:N})]})}}}]);
//# sourceMappingURL=4308.d4cfadbd.chunk.js.map