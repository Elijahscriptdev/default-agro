"use strict";(self.webpackChunkagro_web=self.webpackChunkagro_web||[]).push([[3503],{3503:function(e,r,n){n.r(r);var a=n(1413),s=n(885),l=n(2791),t=n(9434),o=n(2426),i=n.n(o),u=n(3767),c=n(8870),d=n(890),x=n(3466),v=n(3400),p=n(6416),f=n(7692),m=n(7425),g=n(9373),h=n(7068),j=n(3715),Z=n(5865),b=n(5524),w=n(2214),H=n(3168),_=n(9971),k=n(5750),C=n(1682),S=n(4298),y=n(184);r.default=function(){var e,r=(0,t.I0)(),n=(0,l.useState)(1),o=(0,s.Z)(n,2),F=o[0],M=o[1],R=(0,l.useState)(15),U=(0,s.Z)(R,2),E=U[0],z=U[1],A=(0,l.useState)(""),I=(0,s.Z)(A,2),L=I[0],N=I[1],P=(0,l.useState)({}),Y=(0,s.Z)(P,2),D=Y[0],W=Y[1],q=(0,l.useState)(null),B=(0,s.Z)(q,2),G=B[0],J=B[1],K=(0,l.useState)(!1),O=(0,s.Z)(K,2),V=O[0],X=O[1],Q=(0,l.useRef)(null),T=(0,t.v9)((function(e){return e.AuthReducer.userProfile||JSON.parse(sessionStorage.getItem("user_profile"))})),$=(0,t.v9)((function(e){return e.UserManagementReducer.users})),ee=(0,t.v9)((function(e){return e.AppReducer.states}));console.log("u\xa7sers",$);var re=function(){X(!1)},ne=function(e){var r={};e.forEach((function(e){r[e.id]=e.role})),W(r)},ae=(0,l.useCallback)((function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){switch(e){case"add-user":J((0,y.jsx)(C.aL,{closeHandler:re,roles:null===r||void 0===r?void 0:r.roles}));break;case"upload-users":J((0,y.jsx)(C.aK,{closeHandler:re}));break;case"edit-user":J((0,y.jsx)(C.Xk,{closeHandler:re,data:null===r||void 0===r?void 0:r.data,roles:null===r||void 0===r?void 0:r.roles}));break;case"delete-user":J((0,y.jsx)(C.tb,{closeHandler:re,data:r}));break;default:J(null)}X(!0)}}),[]),se=(0,l.useMemo)((function(){return[{Header:"First Name",accessor:"first_name"},{Header:"Last Name",accessor:"last_name"},{Header:"Email",accessor:"email"},{Header:"Group",Cell:function(e){e.value;var r,n=e.row.original;return(0,y.jsx)("span",{children:(r=n.group,/\d+/g.test("".concat(r))?D[r]||"-":r)})}},{Header:"Association",accessor:"association",Cell:function(e){e.value;var r=e.row.original;return(0,y.jsx)("span",{children:r.association||"-"})}},{Header:"State",accessor:"state",Cell:function(e){e.value;var r=e.row.original;return(0,y.jsx)("span",{children:r.state||"-"})}},{Header:"Last Login",accessor:"last_login",Cell:function(e){e.value;var r=e.row.original;return r.last_login?(0,y.jsxs)(u.Z,{direction:"column",spacing:.2,children:[(0,y.jsx)("span",{children:i()(r.last_login).format("YYYY-MM-DD")}),(0,y.jsx)(d.Z,{variant:"span",fontSize:"12px",sx:{color:function(e){return e.palette.primary.main}},children:i()(r.last_login).format("HH:mm:ss")})]}):(0,y.jsx)("span",{children:r.last_login||"-"})}},{Header:"Edit",Cell:function(e){e.value;var r,n=e.row.original;return(0,y.jsx)(_.Z,{role:null===T||void 0===T||null===(r=T.my_role)||void 0===r?void 0:r.role,perform:"user:edit",yes:function(){return(0,y.jsx)(v.Z,{href:"/user-management/edit-user/".concat(n.id),children:(0,y.jsx)(f.vpV,{})})},no:function(){return null}})}},{Header:"Delete",Cell:function(e){e.value;var r,n=e.row.original;return(0,y.jsx)(_.Z,{role:null===T||void 0===T||null===(r=T.my_role)||void 0===r?void 0:r.role,perform:"user:delete",yes:function(){return(0,y.jsx)(v.Z,{onClick:ae("delete-user",n),children:(0,y.jsx)(m.qy0,{})})},no:function(){return null}})}}]}),[null===T||void 0===T||null===(e=T.my_role)||void 0===e?void 0:e.role,ae,D]),le=(0,l.useMemo)((function(){return(null===$||void 0===$?void 0:$.data.map((function(e){var r;return(0,a.Z)((0,a.Z)({},e),{},{state:null===(r=ee[e.state])||void 0===r?void 0:r.name})})))||[]}),[$,ee]);return(0,l.useEffect)((function(){var e={page:F,per_page:E};L&&L.length>1&&(e.search_by_name=L),r((0,k.Rf)(e)),r((0,S.Pz)({})),(0,S.F3)({},ne)}),[r,F,E,L]),(0,y.jsxs)(l.Fragment,{children:[(0,y.jsxs)("section",{children:[(0,y.jsx)("nav",{id:"quick-nav",children:(0,y.jsx)(Z.Z,{breadcrumbs:[(0,y.jsx)(d.Z,{color:"inherit",children:"User Management"},"1"),(0,y.jsx)(d.Z,{color:"primary.main",children:"Manage Users"},"2")]})}),(0,y.jsxs)(c.Z,{sx:{padding:"20px 40px",background:"#FFFFFF",borderRadius:"10px"},children:[(0,y.jsxs)("h2",{className:"with-spinner",style:{fontSize:"20px"},children:[(0,y.jsx)("span",{children:"All Users"}),$.loading?(0,y.jsx)(H.Z,{size:20,color:"primary"}):""]}),(0,y.jsxs)(u.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{flexWrap:{xs:"wrap",md:"nowrap"},marginBottom:"20px"},children:[(0,y.jsx)(j.Z,{InputProps:{ref:Q,startAdornment:(0,y.jsx)(x.Z,{position:"start",children:(0,y.jsx)(p.o,{fontSize:"small"})})},value:L,onChange:function(e){return N(e.target.value)},placeholder:"Search customers",sx:{width:"100%",maxWidth:{sm:"250px"}}}),(0,y.jsxs)(u.Z,{direction:"row",spacing:2,sx:{mt:{xs:2,md:0},mb:{xs:2,md:0}},children:[(0,y.jsx)(b.Z,{href:"/user-management/add-user",value:"Create New User",disableElevation:!0}),(0,y.jsx)(b.Z,{onClick:ae("upload-users"),value:"Upload Users",disableElevation:!0})]})]}),(0,y.jsxs)(c.Z,{children:[(0,y.jsx)(g.Z,{columns:se,data:le,isLoading:$.loading}),(0,y.jsx)(h.Z,{nextHandler:function(){M(F+1)},prevHandler:function(){F>1&&M(F-1)},limitHandler:function(e){return function(e){z(parseInt(e.target.value))}(e)},totalRecords:null===$||void 0===$?void 0:$.total,page:F,limit:E})]})]})]}),(0,y.jsx)(w.Z,{open:V,closeHandler:re,PaperProps:{sx:{maxWidth:"unset"}},children:G})]})}}}]);
//# sourceMappingURL=3503.cdf3bec3.chunk.js.map